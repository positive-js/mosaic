@import '../theming/theming';
@import '../styles/typography/typography-utils';


.mc-alert {
    display: flex;
    align-items: baseline;

    vertical-align: top;
    text-align: left;

    border: $alert-size-border-width solid transparent;
    border-radius: $alert-size-border-radius;

    .mc-link {
        padding-left: 0;
    }

    .mc-alert__icon {
        margin-right: 8px;
    }

    &:not(.mc-alert_small) {
        padding: $alert-size-padding;
    }

    &.mc-alert_small {
        padding: $alert-size-padding-small;
    }

    &.mc-alert_dismissible {
        padding-right: $alert-size-right-padding-dismissible;
    }
}

.mc-alert_dismissible {
    position: relative;

    .mc-alert__close {
        position: absolute;

        z-index: 10;
        right: 15px;

        border: 1px solid transparent;
        outline: 0;

        background: transparent;

        padding: 0;

        cursor: pointer;
        text-align: center;
    }

    &.mc-alert_small {
        .mc-alert__close {
            top: 10px;
        }
    }

    &:not(.mc-alert_small) {
        .mc-alert__close {
            top: 14px;
        }
    }
}

@mixin alert-theme($background, $border, $icon) {
    background-color: $background;
    border-color: $border;

    .mc-alert__icon {
        color: $icon;
    }
}

@mixin mc-alert-theme($theme) {
    $is-dark: map-get($theme, is-dark);

    .mc-alert__close:focus {
        outline: none;
    }

    .mc-alert {
        color: $color-foreground-text;
    }

    .mc-alert_error {
        @if($is-dark) {
            @include alert-theme($color-error-darker, $color-error-darker, $color-error-default);
        } @else {
            @include alert-theme(
                $color-error-lighter, map-get($color-error-palette, 200), map-get($color-error-palette, 400)
            );
        }
    }

    .mc-alert_warning {
        @if($is-dark) {
            @include alert-theme($color-warning-darker, $color-warning-darker, $color-warning-default);
        } @else {
            @include alert-theme($color-warning-lighter, $color-warning-default, $color-warning-darker);
        }
    }

    .mc-alert_success {
        @if($is-dark) {
            @include alert-theme($color-success-darker, $color-success-darker, $color-success-default);
        } @else {
            @include alert-theme($color-success-lighter, $color-success-default, $color-success-darker);
        }
    }

    .mc-alert_info {
        @if($is-dark) {
            @include alert-theme($color-info-darker, $color-info-darker, $color-info-default);
        } @else {
            @include alert-theme($color-info-lighter, $color-info-default, $color-info-darker);
        }
    }

    .mc-alert:not(.mc-alert_error):not(.mc-alert_warning):not(.mc-alert_success):not(.mc-alert_info) {
        @if($is-dark) {
            @include alert-theme($color-second-darker, $color-second-darker, $color-second-default);
        } @else {
            @include alert-theme(
                $color-second-lighter, map-get($color-second-palette, 200), map-get($color-second-palette, 400)
            );
        }
    }
}

@mixin mc-alert-typography($config) {
    .mc-alert:not(.mc-alert_small) {
        @include mc-typography-level-to-styles($config, body);

        header {
            @include mc-typography-level-to-styles($config, subheading);
        }
    }

    .mc-alert.mc-alert_small {
        @include mc-typography-level-to-styles($config, caption);

        header {
            @include mc-typography-level-to-styles($config, caption);
        }

        .mc-link__text {
            @include mc-typography-level-to-styles($config, caption);
        }
    }

    .mc-icon {
        letter-spacing: unset;
    }
}
