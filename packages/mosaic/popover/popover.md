Поповер — небольшой немодальный диалог без затемнения, который открывается рядом с тригерным элементом. Он может содержать текст, поля ввода, любые элементы управления. 

<!-- example(popover-common) -->

### Когда использовать

Возможные кейсы использования поповера:
* Нужно добавить на страницу интерактивный диалог, но без лишней модальности. Например, настройка фильтров в таблице.

### Структура компонента

<div style="margin-top: 15px;">
    <img src="./assets/images/popover/popover__structure.jpg" alt="popover structure" style="max-width: 528px"/>
</div>

#### Обязательные элементы

* Указатель,
* Тело поповера с основным текстом.

#### Необязательные элементы

* Шапка
* Контролы в теле
* Футер
* Кнопки в футере (нежелательны, потому что создают модальность).

#### Размерность

Поповер имеет фиксированную ширину. Чтобы оптимально использовать пространство, полезно заложить несколько вариантов ширины поповера.

| Предустановка | Ширина |
|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Small   | 200 |
| Normal  | 400 по умолчанию |
| Large   | 6400 |

Высота поповера зависит от контента. Рекомендуемая максимальная высота 480px, может быть увеличена на усмотрение дизайнера.

<div class="mc-alert mc-alert_info" style="margin-top: 15px;">
    <i class="mc mc-icon mc-info-o_16 mc-alert__icon"></i>
    <span>Поповер должен оставаться относительно небольшим. Если вам нужно показать много контента, возьмите&nbsp;<a href="/modal" mc-link pseudo>модальный&nbsp;диалог</a> или <a href="/sidepanel" mc-link pseudo>сайдпанель</a>.</span> 
</div>

### Описание работы

#### Как открыть поповер

Поповер появляется после взаимодействия с тригерным элементом. События для открытия поповера: клик.

При открытом поповере, фоновая страница не блокируется, все интерактивные элементы (например [ссылки](/link) и [кнопки](/button)) доступны и при наведении получают ховер.

#### Как закрыть поповер

* Клик мимо поповера
* Клик по кнопкам «отмена» или «применить» в футере (если есть)
* Нажатие на ESC
* Проскроллить страницу (опционально, см. поведение при скролле).

##### Сохранение изменений при закрытии

Поповер с кнопкой «применить» работает как модальный диалог — изменения применяются только нажатием на кнопку. Другие способы закрыть поповер не сохраняют изменения.

Поповер без терминальных кнопок сохраняет изменения в реальном времени. Закрытие кликом мимо поповера или клавишей ESC не сбрасывает изменения.

### Поведение при скролле

Скролл не блокируется. По умолчанию при скролле поповер не закрывается и скроллится вместе со страницей оставаясь в том месте откуда был открыт.

<div class="mc-alert mc-alert_warning" style="margin-top: 15px;">
    <i class="mc mc-icon mc-error_16 mc-alert__icon"></i>
    Поповер может быть закрыт при скролле страницы, какое поведение выбрать решает проектировщик.
</div>

<!-- example(popover-scroll) -->

### Выравнивание

<div class="mc-alert mc-alert_info" style="margin-top: 15px;">
    <i class="mc mc-icon mc-info-o_16 mc-alert__icon"></i>
    Учитывайте контекст, в котором появляется поповер. Настройте выравнивание так, чтобы поповер не закрывал важный контент.
</div>

##### По центру элемента

Указатель по центру поповера, целится в центр тригерного элемента.

<!-- example(popover-placement-center) -->

##### По краю элемента

Край поповера выравнивается по краю тригерного элемента, указатель на фиксированном расстоянии от края поповера. Если элемент слишком маленький, указатель выровняется по центру элемента.

<!-- example(popover-placement-edges) -->

__Динамическое выравнивание__

Если для поповера не хватает места, он попытается перейти в другое положение. Например, из положения «снизу в центре» в положение «сверху в центре».

### Фокус и работа с клавиатурой

Если поповер содержит интерактивные элементы, он управляется по правилам модального окна (смотри [Модальный диалог](/modal)).

После закрытия поповера фокус переходит на тригерный элемент. Это поведение по умолчанию. Есть несколько случаев, когда полезно переместить фокус на другой элемент.

| Клавиша | Поведение |
|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span class="hot-key-Button">Tab</span> | Перевести фокус на/с тригерного элемента |
| <span class="hot-key-Button">Space</span> \ <span class="hot-key-Button">↵</span>| Открыть popover |
| <span class="hot-key-Button">Esc</span> | Свернуть popover |

### Валидация

Форма внутри поповера подчиняется [общим правилам валидации](/validation).

Поповер остается открытым, пока ошибки не будут исправлены.

### Связанные компоненты

[Дропдаун](/dropdown) — кнопка-меню, открывающая выпадающий список доступных действий. Работает как группа контролов — в таб-последовательность попадает только тригерный элемент. Поповер же работает по логике модального диалога: при открытии перехватывает фокус и ведёт его по контролам.

[Тултип](/tooltip) — маленькое сообщение, которое показывается при наведении. В нём не может быть интерактивных элементов или изображений. В поповере можно выстроить интерактивное взаимодействие, поместить больше текста, добавить заголовок. В этом смысле он похож на упрощённый модальный диалог.
